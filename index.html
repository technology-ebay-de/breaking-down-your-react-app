<!doctype html>
<!--suppress RequiredAttributes -->
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Breaking Down Your React App</title>

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/pahund.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- Printing and PDF exports -->
    <script>
        const link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>
</head>
<body>
<div class="reveal">
    <div class="slides">
        <!-- Introduction -->
        <section>
            <img data-src="images/Breaking_Down_Title.png" class="stretch">
            <small>
                Patrick Hund | Lead Frontend Developer | <a target="_blank" href="https://twitter.com/wiekatz">@wiekatz</a>
            </small>
        </section>
        <section>
            <img class="stretch" data-src="images/Green_Field.png">
            <aside class="notes">
                This is what every developer loves to have when starting a new project: a nice green field,
                everything is possible, the magical chance to get things right this time. To use state-of-the-art
                technology, to build something beautiful that will stand the test of time.
                And, of course, make the customers very, very happy.
            </aside>
        </section>
        <section>
            <div class="PH_TODO">Slide: a small castle on the green field</div>
            <aside class="notes">
                So, tadaa, our first release. It‚Äôs all good, software craftsmanship at its best. Servers running
                smoothly, high code coverage, only a few bugs and loose ends.
            </aside>
        </section>
        <section>
            <div class="PH_TODO">Slide: castle has additional towers, turrets and oriels</div>
            <aside class="notes">
                So let‚Äôs add some more features. Our app is coming along great!
            </aside>
        </section>
        <section>
            <div class="PH_TODO">Slide: even more additional building, but some cracks in the wall and broken
                windows
            </div>
            <aside class="notes">
                And some more‚Ä¶ but what‚Äôs this? Bug rate is increasing? It‚Äôs getting harder and harder to
                understand what‚Äôs going on in the code. We should fix that! And fix it we will! Eventually! When
                we‚Äôre done with the next release, or perhaps the one after that, because rolling out those new
                features is super important!
            </aside>
        </section>
        <section>
            <div class="PH_TODO">Slide: More buildings, more cracks, more broken windows, tower that is about to
                tumble propped up with a crutch
            </div>
            <aside class="notes">
                OK, now the developers are fixing some of the problems, but it‚Äôs starting to look more and more
                like we‚Äôre just fire fighting, patching up what actually should be torn down and rebuilt from
                scratch.<br><br>
                In the many years I‚Äôve been working as a software developer, I‚Äôve seen this happen time and time
                again. There‚Äôs nothing I‚Äôm quite as passionate about as finding ways to prevent this phenomenon
                known as:
            </aside>
        </section>
        <section>
            <div class="PH_TODO">Slide: The word ‚ÄûTechnical Debt", the broken castle picture with low opacity in
                the background
            </div>
            <aside class="notes">
                Technical Debt.<br><br>
                While software is actively being worked on, its complexity is constantly increasing, technical
                debt is accumulated, the software becomes harder and harder to modify without breaking things. At
                some point, the cost of fixing it is higher than the cost of rewriting it from scratch.
            </aside>
        </section>
        <section>
            <figure class="stretch">
                <img data-src="images/Tech_Debt_Graph.png">
                <figcaption>
                    (source: <a
                        target="_blank"
                        href="https://www.informatik-aktuell.de/entwicklung/methoden/langlebige-architekturen-technische-schulden-erkennen-und-beseitigen.html">Dr.
                    Carola Lilienthal</a>)
                </figcaption>
            </figure>
            <aside class="notes">
                To prevent this, you have to refactor your code base periodically. It‚Äôs not just about fixing
                bugs, it‚Äôs about keeping your code clean, about making it consistent.<br><br>
                It‚Äôs OK to make some debt, but you have to make sure you have recurring phases of paying off that
                debt, lest it become too great and make cleaning up too costly.
            </aside>
        </section>
        <section>
            <img class="stretch" data-src="images/Tech_Debt_Graph_With_Looping.png">
        </section>
        <section>
            <img class="stretch" data-src="images/Feature_Time_And_Tech_Time.png">
            <aside class="notes">
                In our team, we dedicate only 70% of our time to building new features and creating value for our
                customers.<br><br>
                The remaining 30%, we dedicate to tech time: refactoring, reducing technical debt, but also
                exploring new tools and technologies, finding new ways to improve our software.
            </aside>
        </section>
        <section>
            <img data-src="images/React_Logo.png" class="stretch">
            <aside class="notes">
                So what does all that have to do with React?<br><br>
                What makes React so special to me is that it is based on components. You break down your
                application into neat little parts and work on them separately. You compose your application from
                building blocks, like Lego bricks.
            </aside>
        </section>
        <section>
            <div class="PH_TODO">Slide: Lego bricks, neatly aligned next to each other, labelled ‚ÄúHeader‚Äù,
                ‚ÄûFooter‚Äú, ‚ÄûPagination‚Äú, ‚ÄûSearch Form‚Äú, ‚ÄûItem List‚Äú, ‚ÄûPicture Gallery‚Äú, ‚ÄûAdvertising"
            </div>
            <aside class="notes">
                If you use React right, you can create a set of loosely coupled components, with well defined
                purpose
            </aside>
        </section>
        <section>
            <div class="PH_TODO">Slide: Same lego bricks, assembled to create a structure that resembles a web
                page (ü§î perhaps like a castle, to reference earlier slides?)
            </div>
            <aside class="notes">
                You can use that set of building blocks to build your pages. You can work on each component
                separately, you can even split them into independent npm packages and versionize them.
            </aside>
        </section>
        <section>
            <div class="PH_TODO">Slide: Part of the web page structure is renewed by replacing some of the
                bricks
            </div>
            <aside class="notes">
                If a part of your application needs to be extended or renewed, you can throw away the old
                components and replace them with shiny, new ones. In the pre-component age, with a tightly
                coupled, monolithic application, this was expensive and time consuming, much less now.<br><br>
                ü§î perhaps talk about how we also had reusable components with jQuery, mobile.de home page
                project, 2015<br><br>
                React gives us the chance to make this dream come true, but it does not come automatically
            </aside>
        </section>
        <section>
            <div class="PH_TODO">Slide: ‚ÄûBig ball of mud", ü§î with Lego bricks</div>
            <aside class="notes">
                Just because you are using React doesn‚Äôt mean you a clean, well structured codebase
                automatically. You can create a ‚Äúbig ball of mud" with React just as well as you can with jQuery
                or anything else.
            </aside>
        </section>
        <section>
            <img class="stretch" data-src="images/Break_Down_Time.png">
            <aside class="notes">
                So our team spends its 30% tech time wisely to make sure components are decoupled and
                well-defined. We constantly seek ways to improve the modularity of our codebase, to constantly
                break down our web app into reusable components.
            </aside>
        </section>

        <!-- Higher Order Components, Recompose -->

        <section>
            <img data-src="images/Break_Down_No_1.png" class="stretch">
            <h2>Separating Logic and Layout</h2>
        </section>

        <section>
            <h3>A Simple Start‚Ä¶</h3>
            <iframe data-src="https://codesandbox.io/embed/8x349m4y02?fontsize=12&hidenavigation=1&module=%2Fsrc%2FHackerNews.js"
                    class="stretch"
                    sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe>
            <aside class="notes">
                So here's a basic example for a React component, which we're probably all familiar with from
                tutorials
            </aside>
        </section>

        <section>
            <img data-src="images/Presentational_And_Container_Components.png" class="stretch">
            <h3>Presentational and Container Components</h3>
        </section>

        <section>
            <h3>Separated Dumb Components</h3>
            <iframe data-src="https://codesandbox.io/embed/nnnoyw0jlm?fontsize=12&hidenavigation=1&module=%2Fsrc%2FHackerNews.js"
                    class="stretch"
                    sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe>
            <aside class="notes">
                In this new version of my demo, I've broken down my hacker news components in many little
                presentational components
            </aside>
        </section>

        <section>
            <img data-src="images/Recompose_Screenshot_GitHub.png" class="stretch box-shadow">
        </section>

        <section>
            <h3>Recompose FTW!</h3>
            <iframe data-src="https://codesandbox.io/embed/nr6rnwokjj?fontsize=12&hidenavigation=1&module=%2Fsrc%2FHackerNews.js"
                    class="stretch"
                    sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe>
            <aside class="notes">
                As you can see here, the HackerNews component doesn't have a state anymore, it just has two props
                for the latest news and an update handler<br><br>
                These props are passed in by the Container
            </aside>
        </section>

        <section>
            <h3>Recomposed Spinner</h3>
            <iframe data-src="https://codesandbox.io/embed/52pzn06x0x?fontsize=12&hidenavigation=1&module=%2Fsrc%2FHackerNewsContainer.js"
                    class="stretch"
                    sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe>
            <aside class="notes">
                In this version, I'm removing the last piece of logic from the HackerNews component by putting
                the spinner in a separate component and letting the container decided which version to render,
                depending on whether loading the data is done
            </aside>
        </section>

        <section>
            <h3>Separate Enhancers</h3>
            <iframe data-src="https://codesandbox.io/embed/ymzzyn7qjx?fontsize=12&hidenavigation=1&module=%2Fsrc%2FHackerNewsContainer.js"
                    class="stretch"
                    sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe>
            <aside class="notes">
                The nice part about is the composition ‚Äì if my container becomes too complex, I can split it up
                into multiple enhancer functions in separate modules
            </aside>
        </section>

        <!-- Storybook -->

        <section>
            <img data-src="images/Break_Down_No_2.png" class="stretch">
            <h2>Separate Layout Components Styleguide</h2>
        </section>

        <section>
            <h3>UI in Separate Repository</h3>
            <iframe data-src="https://codesandbox.io/embed/ql8jx0k9r6?fontsize=12&hidenavigation=1&module=%2Fsrc%2FHackerNews.js"
                    class="stretch"
                    sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe>
            <aside class="notes">
                <ul>
                    <li>Separate repo ‚Äì independent versioning</li>
                </ul>
            </aside>
        </section>

        <section>
            <h3>Living Styleguide with Storybook</h3>
            <iframe data-src="./demo-storybook/index.html" class="stretch"></iframe>
            <aside class="notes">
                <ul>
                    <li>Designer can work on the UI independenty</li>
                    <li>Earlier: Styleguides were outdated the day they were published</li>
                    <li>Include README.md from componenents as notes</li>
                </ul>
            </aside>
        </section>

        <!-- Organizing modules -->

        <section>
            <img data-src="images/Break_Down_No_3.png" class="stretch">
            <h2>Organizing Modules</h2>
        </section>

        <section>
            <h3>Separation of Concerns</h3>
            <figure class="stretch">
                <img data-src="images/Separation_of_Concerns.png"
                     onclick="this.src = 'images/Separation_of_Concerns_JS.png';">
                <figcaption>
                    (source: <a target="_blank" href="http://speakerdeck.com/didoo/let-there-be-peace-on-css">Cristiano
                    Rastelli</a>)
                </figcaption>
            </figure>
        </section>

        <section>
            <div style="display: flex; align-items: center; justify-content: space-between" class="stretch">
                <div class="box-shadow" style="overflow: hidden; width: 525px; height: 667px;">
                    <div style="overflow-y: scroll; overflow-x: hidden; width: 525px; height: 100%; background: #fff;">
                        <img data-src="images/Dir_Structure_Before_Blurred.png" onclick="this.src = 'images/Dir_Structure_Before.png';"
                             style="margin: 0; width: 525px; height: 1854px; max-width: inherit; max-height: inherit">
                    </div>
                </div>
                <div style="width: 32px"></div>
                <div class="box-shadow" style="overflow: hidden; width: 525px; height: 667px">
                    <div style="overflow-y: scroll; overflow-x: hidden; width: 525px; height: 100%; background: #fff;">
                        <img data-src="images/Dir_Structure_After_Blurred.png" onclick="this.src = 'images/Dir_Structure_After.png';"
                             style="margin: 0; width: 525px; height: 1854px; max-width: inherit; max-height: inherit">
                    </div>
                </div>
            </div>
            <aside class="notes">
                <ul>
                    <li>Mention index.js files</li>
                </ul>
            </aside>
        </section>

        <!--
            Bricks / modular toolkit
            * Rebasing selectors
        -->
        <section>
            <img data-src="images/Break_Down_No_4.png" class="stretch">
            <h2>Breaking Down Redux</h2>
        </section>

        <section>
            <iframe data-src="https://codesandbox.io/s/81oyz53868?fontsize=12&hidenavigation=1&module=%2Fsrc%2Findex.js"
                    class="stretch"
                    sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe>
            <aside class="notes">
                <ul>
                    <li>Header gets title from Redux state</li>
                    <li>Hacker news from previous examples now wired up with Redux</li>
                </ul>
            </aside>
        </section>
        <section>
            <div class="PH_TODO">Activity diagram that explains how it works</div>
        </section>
        <section>
            <h2>üò± Why all the complexity?</h2>
            <p>Why all that boilerplate code?</p>
        </section>
        <section>
            <div class="PH_TODO">Revised code example with hydration from root node</div>
            <aside class="notes">
                <ul>
                    <li>Render HTML on the server, hydrate state in client</li>
                    <li>Dispatch actions from outside</li>
                </ul>
            </aside>
        </section>
        <section>
            <div class="PH_TODO">Lego brick drawing with studs ‚Äì each stud with label</div>
            <aside class="notes">
                <ul>
                    <li>explain the places where the module is wired to the mother app</li>
                </ul>
            </aside>
        </section>
        <section>
            <div class="PH_TODO">Drawing state schema and how the module gets its data from it</div>
            <aside class="notes">
                <ul>
                    Still one problem: global state vs. local state of module ‚Äì too tightly coupled
                </ul>
            </aside>
        </section>
        <section>
            <h3>Selectors to the rescue!</h3>
            <div class="PH_TODO">todo</div>
        </section>
        <section>
            <div class="PH_TODO">final code example with selectors</div>
        </section>
        <section>
            <div class="PH_TODO">
                Screenshot of modular toolkit repo on GitHub
                URL
            </div>
        </section>
        <section>
            <div class="PH_TODO">Lego castle revisited</div>
        </section>

        <!-- Summary, End -->
        <section>
            <h2>Thank you!</h2>
            <table class="credits">
                <tr>
                    <td>
                        <p class="name">Ninja Maa√ü
                        <p>
                        <p class="function">Frontend Developer</p>
                    </td>
                    <td>
                        <p class="name">Daniel Sch√§fer</p>
                        <p class="function">Frontend Developer</p>
                    </td>
                    <td>
                        <p class="name">Eike Schulte-Kersmecke</p>
                        <p class="function">Backend Developer</p>
                    </td>
                </tr>
                <tr>
                    <td>
                        <p class="name">Anja Kunkel</p>
                        <p class="function">Backend Developer</p>
                    </td>
                    <td>
                        <p class="name">Torsten Walter</p>
                        <p class="function">Frontend Developer</p>
                    </td>
                    <td>
                        <p class="name">Juho Veps√§l√§inen</p>
                        <p class="function">Dev Consultant</p>
                    </td>
                </tr>
                <tr>
                    <td>
                        <p class="name">Mike Kr√ºger</p>
                        <p class="function">Quality Assurance</p>
                    </td>
                    <td>
                        <p class="name">Hajo Skwirblies</p>
                        <p class="function">Site Operations</p>
                    </td>
                    <td>
                        <p class="name">Florian Stefan</p>
                        <p class="function">Architect</p>
                    </td>
                </tr>
                <tr>
                    <td>
                        <p class="name">Christoph Springer</p>
                        <p class="function">Team Lead</p>
                    </td>
                    <td>
                        <p class="name">Julia Thiele</p>
                        <p class="function">Product Owner</p>
                    </td>
                    <td>
                        <p class="name">Jakob Gehring</p>
                        <p class="function">Product Owner</p>
                    </td>
                </tr>
            </table>
            <p>
                View this presentation online: <a target="_blank" href="http://bit.ly/break-react">bit.ly/break-react</a>
            </p>
            <p>
                <small>
                    Patrick Hund | Lead Frontend Developer | <a target="_blank" href="https://twitter.com/wiekatz">@wiekatz</a>
                </small>
            </p>
        </section>
    </div>
</div>

<script src="lib/js/head.min.js"></script>
<script src="js/reveal.js"></script>

<script>
    // More info about config & dependencies:
    // - https://github.com/hakimel/reveal.js#configuration
    // - https://github.com/hakimel/reveal.js#dependencies
    // noinspection JSUnusedGlobalSymbols
    Reveal.initialize({
        history: true,
        dependencies: [
            { src: 'plugin/markdown/marked.js' },
            { src: 'plugin/markdown/markdown.js' },
            { src: 'plugin/notes/notes.js', async: true },
            { src: 'socket.io/socket.io.js', async: true },
            { src: 'plugin/notes-server/client.js', async: true },
            {
                src: 'plugin/highlight/highlight.js',
                async: true,
                callback: function () {
                    hljs.initHighlightingOnLoad();
                }
            }
        ]
    });
</script>
</body>
</html>
